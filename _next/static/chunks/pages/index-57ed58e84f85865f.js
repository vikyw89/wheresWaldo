(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(129)}])},129:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return O},state:function(){return I}});var n=i(5893),r=i(629),s=i(5861),a=i(3232);let o=()=>{let e=(0,a.C0)("theme");return(0,n.jsx)(r.Z,{elevation:10,sx:{backgroundColor:"hsla(0,100%,100%,0%)",zIndex:"10",padding:"10px",textAlign:"center",position:"fixed",bottom:"0",width:"100%",backdropFilter:"contrast(150%)"},children:(0,n.jsx)(s.Z,{variant:"h7",sx:{color:e.palette.text.primary},children:"Made by Viky for The Odin Project 2023"})})};var l=i(9226),d=i(5675),c=i.n(d),x=i(7294),h=i(6585),p=i(6863),u=i(1339),g=i(9031),f=i(8456);let w=()=>(0,n.jsxs)(l.Z,{sx:{height:"100vh",width:"100%",flex:"1",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,n.jsx)(f.Z,{sx:{width:"80vw"}}),(0,n.jsx)(s.Z,{variant:"h5",children:"Loading Stage"})]}),j=(e,t)=>{let{x:i,y:n}=e,{startX:r,startY:s,endX:o,endY:l}=t.coordinate;if(r>i||s>n||o<i||l<n){(0,a.cA)("show.notif",!0),(0,a.cA)("state.notif","NOPE"),setTimeout(()=>{(0,a.lC)("show.notif"),(0,a.lC)("state.notif")},5e3);return}(0,a.cA)("state.selectedStage.wanted.data",e=>{let i=e.filter(e=>e.doc_id!==t.doc_id);return i}),delete t.date_created,g.q.updateDoc("stages/".concat((0,a.zr)("state.selectedStage.doc_id"),"/wanted/").concat(t.doc_id),{...t,times_caught:t.times_caught+1}),(0,a.cA)("show.notif",!0),(0,a.cA)("state.notif","You caught ".concat(t.name," !")),setTimeout(()=>{(0,a.lC)("show.notif"),(0,a.lC)("state.notif")},5e3),0===(0,a.zr)("state.selectedStage.wanted.data").length&&((0,a.cA)("show.win",!0),(0,a.cA)("show.gameScreen",!1),(0,a.cA)("show.timer",!1))},m=()=>{let e=(0,a.C0)("state.selectedStage.doc_id"),{x:t,y:i}=(0,a.C0)("state.snipe.screen"),{data:r,loading:o}=(0,a.Oc)("state.selectedStage.wanted",async()=>{let t=await g.q.readCol("stages/".concat(e,"/wanted/"));return t}),d=(0,a.C0)("state.snipe.image"),c=e=>{(0,a.cA)("show.snipe",!1);let t=e.target.dataset.doc_id,i=r.filter(e=>e.doc_id===t)[0];j(d,i)};return(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(l.Z,{sx:{border:"5px dashed red",borderRadius:"100px",position:"fixed",top:i-50,left:t-50,height:"100px",width:"100px",backdropFilter:"contrast(120%)"}}),(0,n.jsx)(s.Z,{variant:"h5",sx:{color:"white",position:"fixed",top:i-10,left:t-150},children:"catch ?"}),(0,n.jsx)(h.Z,{in:!0,children:(0,n.jsxs)(p.Z,{orientation:"horizontal","aria-label":"vertical outlined button group",sx:{position:"fixed",top:i-50,left:t+75,display:"flex",flexDirection:"column"},children:[r&&r.map(e=>(0,n.jsx)(u.Z,{variant:"contained",color:"error",onClick:c,"data-doc_id":e.doc_id,children:e.name},e.doc_id)),o&&(0,n.jsx)(w,{})]})})]})},v=e=>{(0,a.cA)("show.snipe",e=>!e);let[t,i]=[e.pageX,e.pageY],{height:n,width:r}=e.target;(0,a.cA)("state.snipe.screen",{x:t-window.scrollX,y:i-window.scrollY}),(0,a.cA)("state.snipe.image",{x:Math.floor(100*t/r),y:Math.floor(100*i/n)})},C=()=>{let e=(0,a.C0)("state.selectedStage"),t=(0,a.C0)("show"),i=(0,a.C0)("state.snipe"),r=(0,a.C0)("state.notif");(0,x.useEffect)(()=>{let e=()=>{(0,a.cA)("show.snipe",!1),(0,a.lC)("show.notif")};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[e]);let o=()=>{(0,a.cA)("show.timer",!0)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{sx:{flex:1,position:"relative",width:"100vw",display:"flex",justifyContent:"center",paddingTop:""},children:e&&(0,n.jsx)("div",{style:{width:"100%",minHeight:"100%"},children:(0,n.jsx)(c(),{src:e.image_url,alt:e.name,width:"0",height:"0",sizes:"100vw",style:{width:"100%",height:"auto"},onClick:v,onLoad:o})})}),(null==t?void 0:t.notif)&&(0,n.jsx)(s.Z,{variant:"h6",sx:{color:"red",border:"5px dashed red",borderRadius:"100px",position:"fixed",top:i.screen.y-50,left:i.screen.x-50,height:"100px",width:"100px",backdropFilter:"contrast(120%)"},children:r}),(null==t?void 0:t.snipe)&&(0,n.jsx)(m,{})]})},y=()=>{let e=(0,a.C0)("state.timer");return(0,x.useEffect)(()=>{let e=setInterval(()=>{(0,a.cA)("state.timer",e=>(e||(e=0),e+1))},1e3);return()=>{clearInterval(e)}},[]),(0,n.jsxs)(l.Z,{sx:{display:"flex",color:"white",alignItems:"center",justifyContent:"center"},children:[(0,n.jsx)("span",{children:"countdown"}),(0,n.jsx)("span",{style:{paddingLeft:"5px",color:"red",fontSize:"1.2rem"},children:e})]})},b=()=>{let e=(0,a.C0)("theme"),t=(0,a.C0)("show.timer"),i=()=>{window.location.reload(!1)};return(0,n.jsxs)(r.Z,{elevation:1,sx:{padding:"10px",textAlign:"center",position:"fixed",width:"100%",top:"0px",zIndex:"10",backgroundColor:"hsla(255,90%,30%,0%)",backdropFilter:"contrast(150%)"},children:[(0,n.jsx)(s.Z,{variant:"h4",sx:{color:e.palette.text.primary,userSelect:"none"},onClick:i,children:"whereIs ?"}),t&&(0,n.jsx)(y,{})]})},Z=async()=>{let e=await g.q.readCol("stages");return e},_=e=>{(0,a.cA)("show.stageSelector",!1),(0,a.cA)("show.gameScreen",!0),(0,a.cA)("state.selectedStage",e)},A=()=>{let e=(0,a.C0)("theme"),t=(0,a.Oc)("state.stages",Z);return(0,x.useEffect)(()=>{}),(0,n.jsxs)(n.Fragment,{children:[t.loading&&(0,n.jsx)(w,{}),t.data&&(0,n.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",padding:"20px",borderRadius:"20px",gap:"10px",maxWidth:"100%"},children:[(0,n.jsx)(s.Z,{sx:{fontWeight:"bold",textAlign:"center"},variant:"h4",color:"secondary",children:"WORLD SELECTION"}),t.loading&&(0,n.jsx)(w,{}),t.data&&(0,n.jsx)("swiper-container",{navigation:"true",effect:"flip","grab-cursor":"true",style:{height:"100%",maxWidth:"600px"},children:t.data.map((t,i)=>(0,n.jsxs)("swiper-slide",{style:{backgroundPosition:"center",backgroundSize:"cover",display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"10px",border:"1px solid white",padding:"10px"},children:[(0,n.jsx)("div",{style:{height:"300px",width:"300px",overflow:"hidden",borderRadius:"20px"},children:(0,n.jsx)(c(),{src:t.thumbnail_url,priority:!0,alt:"Current Image",width:"0",height:"0",sizes:"100vw",style:{width:"100%",height:"auto",objectFit:"cover"}})}),(0,n.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,n.jsx)(s.Z,{variant:"h3",sx:{color:e.palette.text.primary},children:t.name}),(0,n.jsxs)(s.Z,{variant:"h5",sx:{color:e.palette.text.primary},children:["Author : ",t.author]}),(0,n.jsx)(s.Z,{variant:"h5",sx:{color:e.palette.text.primary},children:"Best Records :"}),(0,n.jsx)(l.Z,{sx:{overflowY:"scroll",height:"100%"},children:null==t?void 0:t.records.sort((e,t)=>e.time-t.time).map((e,t)=>(0,n.jsxs)(l.Z,{sx:{color:"white",display:"flex",justifyContent:"space-between",borderRadius:"5px",backgroundColor:"hsla(255,80%,80%,40%)",padding:"5px"},children:[(0,n.jsx)(s.Z,{children:e.name}),(0,n.jsxs)(s.Z,{children:[e.time,"s"]})]},t))})]}),(0,n.jsx)(u.Z,{sx:{width:"100%"},variant:"contained",color:"success",size:"large",onClick:()=>_(t),children:(0,n.jsx)(s.Z,{variant:"h4",children:"Enter"})})]},i))})]})]})};var k=i(4054);let S=e=>{let{text:t}=e;return(0,n.jsx)(r.Z,{elevation:10,sx:{backgroundColor:"hsla(255,80%,80%,80%)",backdropFilter:"contrast(200%)",padding:"20px",borderRadius:"20px"},children:(0,n.jsx)(s.Z,{color:"primary",variant:"h4",sx:{textAlign:"center"},children:t})})},z=()=>{let e=(0,a.zr)("state.selectedStage.doc_id"),t=(0,a.zr)("state.stages.data").filter(t=>t.doc_id===e)[0],[i,s]=(0,x.useState)(""),o=()=>{let n={name:i,time:(0,a.zr)("state.timer")},r={...t,records:[...t.records,n]};g.q.updateDoc("stages/".concat(e),r),window.location.reload(!1)};return(0,n.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,n.jsx)(S,{text:"YOU WON !"}),(0,n.jsx)(S,{text:"Congratz on winning ".concat((0,a.zr)("state.selectedWorld.data.name"))}),(0,n.jsx)(S,{text:"Your time record was ".concat((0,a.zr)("state.timer")," seconds")}),(0,n.jsxs)(r.Z,{elevation:10,sx:{padding:"20px",backgroundColor:"hsla(255,80%,80%,80%)",borderRadius:"20px",display:"flex",flexWrap:"wrap"},children:[(0,n.jsx)(k.Z,{variant:"outlined",label:"Input your name",sx:{flex:1},value:i,onChange:e=>{s(e.target.value)}}),(0,n.jsx)(u.Z,{variant:"contained",onClick:o,children:"Upload record"})]})]})};var E=i(8377);let I={show:{stageSelector:!0,snipe:!1,timer:!1,notif:!1,stageEdit:!1,gameScreen:!1,win:!1},state:{stages:null,selectedStage:null,notif:null}};function O(){let e=(0,a.C0)("show");return(0,n.jsxs)(E.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100%",margin:"0 auto"},children:[(0,n.jsx)(b,{}),e.stageSelector&&(0,n.jsx)(A,{}),e.gameScreen&&(0,n.jsx)(C,{}),e.win&&(0,n.jsx)(z,{}),(0,n.jsx)(o,{})]})}(0,a.cA)("show",I.show),(0,a.cA)("data",I.state)}},function(e){e.O(0,[16,748,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);